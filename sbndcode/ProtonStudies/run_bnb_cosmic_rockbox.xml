<?xml version="1.0"?>

<!-- Production Project -->

<!DOCTYPE project [
<!ENTITY release "v09_91_02_02">
<!ENTITY releasetag "e26:prof">
<!ENTITY my_version "v4">
<!ENTITY my_run "1">
<!ENTITY name "mdeltutt_protonana_bnbcosmic">
<!ENTITY file_type "data">
<!ENTITY run_type "physics">
<!ENTITY PNFSpath "/pnfs/sbnd/resilient/users/mdeltutt/">
<!ENTITY SCRATCHpath "/pnfs/sbnd/scratch/users/mdeltutt/">
]>


<project name="&name;">

  <!-- Group -->
  <group>sbnd</group>

  <!-- Project size -->
  <numevents>100000</numevents>

  <!-- Batch resources -->
  <resource>DEDICATED,OPPORTUNISTIC,OFFSITE</resource>

  <!-- Larsoft information -->
  <larsoft>
    <tag>&release;</tag>
    <qual>&releasetag;</qual>
    <local>&PNFSpath;Tarballs/sbndcode_&release;_protonana__&my_version;.tgz</local>
  </larsoft>

  <!-- Project stages -->
  <stage name="gen">
    <fcl>prodoverlay_corsika_cosmics_proton_genie_rockbox_sce.fcl</fcl>
    <fcl>g4_sce_dirt_filter_lite.fcl</fcl>
    <fcl>detsim_sce_lite.fcl</fcl>
    <fcl>standard_reco1_sbnd.fcl</fcl>
    <fcl>reco2_sce.fcl</fcl>
    <!-- <fcl>run_protonanalyzer.fcl</fcl> -->
    <inputdef>official_MCP2024B_prodoverlay_corsika_cosmics_proton_genie_rockbox_sce_reco2_sbnd</inputdef>
    <maxfilesperjob>100</maxfilesperjob>
    <!-- <defname>&name;_&tag;_gen</defname> -->
    <outdir>&SCRATCHpath;/&release;/protonana_ana_bnbcosmic_&my_version;_&my_run;</outdir>
    <workdir>&PNFSpath;grid_workdir_sbnd/protonana_ana_bnb</workdir>
    <numjobs>200</numjobs>
    <datatier>generated</datatier>
    <memory>8000</memory>
    <jobsub> --expected-lifetime=6h -Q --generate-email-summary -l +SingularityImage=\"/cvmfs/singularity.opensciencegrid.org/fermilab/fnal-wn-sl7:latest\" --append_condor_requirements='(TARGET.HAS_SINGULARITY=?=true)' </jobsub>
    <jobsub_start> --singularity-image=/cvmfs/singularity.opensciencegrid.org/fermilab/fnal-wn-sl7:latest --append_condor_requirements='(TARGET.HAS_SINGULARITY=?=true)' </jobsub_start>
    <disk>50GB</disk>
  </stage>

  <stage name="ana">
    <fcl>run_protonanalyzer.fcl</fcl>
    <inputdef>official_MCP2024B_prodoverlay_corsika_cosmics_proton_genie_rockbox_sce_reco2_sbnd</inputdef>
    <maxfilesperjob>100</maxfilesperjob>
    <!-- <defname>&name;_&tag;_gen</defname> -->
    <outdir>&SCRATCHpath;/&release;/protonana_ana_bnbcosmic_&my_version;_&my_run;</outdir>
    <workdir>&PNFSpath;grid_workdir_sbnd/protonana_ana_bnb</workdir>
    <numjobs>200</numjobs>
    <datatier>generated</datatier>
    <memory>8000</memory>
    <jobsub> --expected-lifetime=6h -Q --generate-email-summary -l +SingularityImage=\"/cvmfs/singularity.opensciencegrid.org/fermilab/fnal-wn-sl7:latest\" --append_condor_requirements='(TARGET.HAS_SINGULARITY=?=true)' </jobsub>
    <jobsub_start> --singularity-image=/cvmfs/singularity.opensciencegrid.org/fermilab/fnal-wn-sl7:latest --append_condor_requirements='(TARGET.HAS_SINGULARITY=?=true)' </jobsub_start>
    <disk>50GB</disk>
  </stage>

  <!-- file type -->
  <filetype>&file_type;</filetype>

  <!-- run type -->
  <runtype>&run_type;</runtype>

</project>
